<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>块级作用域</title>
	
</head>

<body>
	<script type="text/javascript">
		// ES5只有全局作用域和函数作用域, 没有块级作用域, 这导致很多场景不合理.
		// 1.内层变量可能会覆盖外外层变量
		var tmp = new Date();

		function f() {
			// console.log(temp);
			if (false) {
				var tmp = 'hello world';
			}
		}
		f(); //temp is not defined
		//2.用来计数的循环变量泄露为全局变量
		var s = 'hello';
		for (var i = 0; i < s.length; i++) {
			console.log(s[i]);
		}
		console.log(i);

		// ES6的块级作用域
		// 块级作用域的出现, 实际上使得获得广泛应用的立即执行匿名函数(IIFE)不再必要了
		// IIFE写法
		// IIFE(Immediately-Invoked Function Expression) 立即执行函数表达式
		(function () {
			var tmp = '...';
			// ...
		}());
		// 块级作用域写法
		{
			let tmp = '...';
			// ...
		}

		function f() {
			console.log('I am outside!');
		}
		(function () {
			if (false) {
				function f() {
					console.log('I am inside!');
				}
			}
			f();

		}())
	</script>
	
</body>

</html>